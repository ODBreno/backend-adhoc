generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model deputado_orgao {
  id_deputado Int
  id_orgao    Int
  deputados   deputados @relation(fields: [id_deputado], references: [id], onDelete: NoAction, onUpdate: NoAction)
  orgaos      orgaos    @relation(fields: [id_orgao], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([id_deputado, id_orgao])
}

model deputados {
  id              Int               @id
  nome            String
  siglapartido    String
  siglauf         String            @db.VarChar(2)
  idlegislatura   Int               @db.SmallInt
  deputado_orgao  deputado_orgao[] 
  legislatura     legislatura       @relation(fields: [idlegislatura], references: [id], onDelete: NoAction, onUpdate: NoAction)
  despesas        despesas[]
  evento_deputado evento_deputado[]
}

model despesas {
  id                String    @id
  numdocumento      String
  coddocumento      BigInt
  tipodespesa       String
  datadocumento     DateTime  @db.Date
  valordocumento    Float
  nomefornecedor    String
  cnpjcpffornecedor String
  valorliquido      Float
  id_deputado       Int
  deputados         deputados @relation(fields: [id_deputado], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model evento {
  id              Int               @id
  datahorainicio  DateTime          @db.Timestamp(6)
  datahorafim     DateTime?         @db.Timestamp(6)
  situacao        String
  descricao       String
  localexterno    String?
  localcamara     String?
  evento_deputado evento_deputado[]
  evento_orgao    evento_orgao[]    
}

model evento_deputado {
  id_evento   Int
  id_deputado Int
  deputados   deputados @relation(fields: [id_deputado], references: [id], onDelete: NoAction, onUpdate: NoAction)
  evento      evento    @relation(fields: [id_evento], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([id_evento, id_deputado])
}

model evento_orgao {
  id_evento Int
  id_orgao  Int
  evento    evento @relation(fields: [id_evento], references: [id], onDelete: NoAction, onUpdate: NoAction)
  orgaos    orgaos @relation(fields: [id_orgao], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([id_evento, id_orgao])
}

model legislatura {
  id         Int         @id
  datainicio DateTime    @db.Date
  datafim    DateTime    @db.Date
  deputados  deputados[]
}

model orgaos {
  id             Int              @id
  sigla          String
  nome           String
  apelido        String
  codtipoorgao   Int
  tipoorgao      String
  nomepublicacao String
  deputado_orgao deputado_orgao[] 
  evento_orgao   evento_orgao[]  
}
